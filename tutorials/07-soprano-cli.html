
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Tutorial 7 - Command-line interface &#8212; Soprano</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=87e54e7c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=5eb1bb1e"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tutorials/07-soprano-cli';</script>
    <link rel="icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Job Submitter" href="../submitter.html" />
    <link rel="prev" title="Tutorial 6 - Soprano for defect calculations" href="06-defect_calculations.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/soprano_logo.svg" class="logo__image only-light" alt="Soprano - Home"/>
    <script>document.write(`<img src="../_static/soprano_logo.svg" class="logo__image only-dark" alt="Soprano - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    About
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../cli.html">Command Line Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cli-cookbook.html">CLI Cookbook</a></li>
</ul><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="01-basic_concepts.html">Tutorial 1 - Basic concepts: using AtomsCollection objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="02-generators_properties_calculators.html">Tutorial 2 - Generators, Properties and Calculators</a></li>
<li class="toctree-l2"><a class="reference internal" href="03-atomselection_transforms.html">Tutorial 3 - AtomSelection and transforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="04-clustering.html">Tutorial 4 - Clustering analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="05-nmr.html">Tutorial 5 - NMR Properties: using Soprano for working with .magres files</a></li>




<li class="toctree-l2"><a class="reference internal" href="06-defect_calculations.html">Tutorial 6 - Soprano for defect calculations</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Tutorial 7 - Command-line interface</a></li>
</ul><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../submitter.html">Job Submitter</a></li>

<li class="toctree-l1 has-children"><a class="reference internal" href="../api.html">API reference</a><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../_autosummary/soprano.html">soprano</a><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/soprano.analyse.html">soprano.analyse</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.analyse.phylogen.html">soprano.analyse.phylogen</a></li>
</ul><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/soprano.calculate.html">soprano.calculate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.calculate.gulp.html">soprano.calculate.gulp</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.calculate.nmr.html">soprano.calculate.nmr</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.calculate.powder.html">soprano.calculate.powder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.calculate.xrd.html">soprano.calculate.xrd</a></li>
</ul><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/soprano.collection.html">soprano.collection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.collection.collection.html">soprano.collection.collection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.collection.generate.html">soprano.collection.generate</a></li>
</ul><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/soprano.data.html">soprano.data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.data.nmr.html">soprano.data.nmr</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.data.vdw.html">soprano.data.vdw</a></li>
</ul><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/soprano.hpc.html">soprano.hpc</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.hpc.submitter.html">soprano.hpc.submitter</a></li>
</ul><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/soprano.measure.html">soprano.measure</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/soprano.nmr.html">soprano.nmr</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.nmr.tensor.html">soprano.nmr.tensor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.nmr.utils.html">soprano.nmr.utils</a></li>
</ul><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/soprano.optional.html">soprano.optional</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/soprano.properties.html">soprano.properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.properties.atomsproperty.html">soprano.properties.atomsproperty</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.properties.basic.html">soprano.properties.basic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.properties.castep.html">soprano.properties.castep</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.properties.labeling.html">soprano.properties.labeling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.properties.linkage.html">soprano.properties.linkage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.properties.map.html">soprano.properties.map</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.properties.nmr.html">soprano.properties.nmr</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.properties.order.html">soprano.properties.order</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.properties.symmetry.html">soprano.properties.symmetry</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.properties.transform.html">soprano.properties.transform</a></li>
</ul><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/soprano.rnd.html">soprano.rnd</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/soprano.scripts.html">soprano.scripts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.scripts.cli.html">soprano.scripts.cli</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.scripts.cli_utils.html">soprano.scripts.cli_utils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.scripts.dipolar.html">soprano.scripts.dipolar</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.scripts.extract_nmr.html">soprano.scripts.extract_nmr</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.scripts.molecules.html">soprano.scripts.molecules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.scripts.msaverage.html">soprano.scripts.msaverage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.scripts.nmr.html">soprano.scripts.nmr</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.scripts.nmr_plot.html">soprano.scripts.nmr_plot</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.scripts.phylogen.html">soprano.scripts.phylogen</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.scripts.vasp2cell.html">soprano.scripts.vasp2cell</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/soprano.scripts.view.html">soprano.scripts.view</a></li>
</ul><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/soprano.selection.html">soprano.selection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/soprano.utils.html">soprano.utils</a></li>
</ul><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary>
</details></li>
</ul><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary>
</details></li>

<li class="toctree-l1"><a class="reference internal" href="../citing.html">Citing Soprano</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/jkshenton/soprano/master?urlpath=tree/tutorials/07-soprano-cli.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Binder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Binder logo" src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://colab.research.google.com/github/jkshenton/soprano/blob/master/tutorials/07-soprano-cli.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/jkshenton/soprano" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jkshenton/soprano/issues/new?title=Issue%20on%20page%20%2Ftutorials/07-soprano-cli.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/tutorials/07-soprano-cli.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Tutorial 7 - Command-line interface</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#extracting-nmr-data-from-a-magres-file">1. Extracting NMR data from a .magres file</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#filtering-and-selecting-atoms">Filtering and selecting atoms</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#averaging-over-functional-groups">Averaging over functional groups</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#other-options">Other options</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting-simulated-spectra-from-magres-file">2. Plotting simulated spectra from .magres file</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dipolar-coupling-calculations">Dipolar coupling calculations</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="tutorial-7-command-line-interface">
<h1>Tutorial 7 - Command-line interface<a class="headerlink" href="#tutorial-7-command-line-interface" title="Link to this heading">#</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      <span class="n">_</span>
    <span class="o">/|</span><span class="n">_</span><span class="o">|</span>\   
   <span class="o">/</span> <span class="o">/</span> \ \  
  <span class="o">/</span><span class="n">_</span><span class="o">/</span>   \<span class="n">_</span>\  
  \ \   <span class="o">/</span> <span class="o">/</span>  
   \ \<span class="n">_</span><span class="o">/</span> <span class="o">/</span>  
    \<span class="o">|</span><span class="n">_</span><span class="o">|/</span>  

</pre></div>
</div>
<p>SOPRANO: a Python library for generation, manipulation and analysis of large batches of crystalline structures</p>
<p><em>Developed within the CCP-NC project. Copyright STFC 2022</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This library is useful for displaying the results of the CLI in this notebook.</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Image</span>
</pre></div>
</div>
</div>
</div>
<p>In this tutorial we cover some of capabilities of the Soprano command-line interface (CLI).</p>
<p>The CLI is a simple wrapper around the Soprano Python library, which allows to perform some of the most common tasks without having to write any Python code.</p>
<p>You can always get help on the CLI by running <code class="docutils literal notranslate"><span class="pre">soprano</span> <span class="pre">--help</span></code> or <code class="docutils literal notranslate"><span class="pre">soprano</span> <span class="pre">&lt;command&gt;</span> <span class="pre">--help</span></code> (where you can replace <code class="docutils literal notranslate"><span class="pre">&lt;command&gt;</span></code> with any of the commands listed below).</p>
<p>The CLI is still under development and more commands will be added in the future. If you have any suggestions, please get in touch with us!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>soprano<span class="w"> </span>--help
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Usage: soprano [OPTIONS] COMMAND [ARGS]...

  A CLI tool to streamline common soprano tasks. It has various  subcommands,
  each of which has its own set of options and help.

Options:
  -v, --verbosity LVL  Either CRITICAL, ERROR, WARNING, INFO or DEBUG
  --help               Show this message and exit.

Commands:
  dipolar    Extract and summarise dipolar couplings from structure files.
  nmr        Extract and analyse NMR data from magres file(s).
  plotnmr    Plot the NMR spectrum from a .magres file.
  splitmols  Extract all molecules in a molecular crystal (in any...
  view       Visualise the structure(s) in the given file(s) using the...

      Author: J. Kane Shenton (kane.shenton@stfc.ac.uk)

      Last updated: June 21, 2023
</pre></div>
</div>
</div>
</div>
<section id="extracting-nmr-data-from-a-magres-file">
<h2>1. Extracting NMR data from a .magres file<a class="headerlink" href="#extracting-nmr-data-from-a-magres-file" title="Link to this heading">#</a></h2>
<p>The Soprano <code class="docutils literal notranslate"><span class="pre">nmr</span></code> command allows to extract NMR data from a .magres file. The command is very simple to use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>soprano<span class="w"> </span>nmr<span class="w"> </span>&lt;magres_file<span class="w"> </span>&gt;
</pre></div>
</div>
<p>By default this will output a summary table with all of the magnetic shielding and electric field gradient information in the file.</p>
<p>Chemical shielding columns will include:</p>
<ul class="simple">
<li><p>shielding</p></li>
<li><p>shift (if a reference has been specified)</p></li>
<li><p>anisotropy</p></li>
<li><p>reduced_anisotropy</p></li>
<li><p>asymmetry</p></li>
<li><p>span</p></li>
<li><p>skew</p></li>
<li><p>euler angles</p></li>
</ul>
<p>and EFG columns will include:</p>
<ul class="simple">
<li><p>Vzz</p></li>
<li><p>Quadrupolar_constant</p></li>
<li><p>asymmetry</p></li>
<li><p>euler angles</p></li>
<li><p>NQR transitions</p></li>
</ul>
<p>You can include/exclude columns using the <code class="docutils literal notranslate"><span class="pre">--include</span></code> and <code class="docutils literal notranslate"><span class="pre">--exclude</span></code> options.</p>
<p>By default, we reduce to the unique sites in the system. This is done either by looking at the CIF labels (if present) or by symmetry analysis. You can disable this behaviour using the <code class="docutils literal notranslate"><span class="pre">--no-reduce</span></code> option.</p>
<p>If sites have been combined, the output will also include the <code class="docutils literal notranslate"><span class="pre">multiplicity</span></code> column, which indicates how many ‘duplicates’ of the site are present in the system.</p>
<section id="filtering-and-selecting-atoms">
<h3>Filtering and selecting atoms<a class="headerlink" href="#filtering-and-selecting-atoms" title="Link to this heading">#</a></h3>
<p>One of the useful features of the CLI is to quickly filter and summarise the information you’re interested in. You can do this across multiple .magres files at the same time, if you wish.</p>
<p>For example, we can use the <code class="docutils literal notranslate"><span class="pre">-s</span></code> option to filter the output by site label or species:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>soprano<span class="w"> </span>nmr<span class="w"> </span>&lt;magres_file<span class="w"> </span>&gt;<span class="w"> </span>-s<span class="w"> </span>C
</pre></div>
</div>
<p>will only output the NMR data for the carbon atoms.</p>
<p>If you have CIF-style labels in your .magres file, you can specify these using the same <code class="docutils literal notranslate"><span class="pre">-s</span></code> option:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>soprano<span class="w"> </span>nmr<span class="w"> </span>&lt;magres_file<span class="w"> </span>&gt;<span class="w"> </span>-s<span class="w"> </span>C1,H1a,H1b
</pre></div>
</div>
<p>Notice that we also combined multiple selections, separated by commas.</p>
<p>If you don’t have CIF-style labels, you can add a <code class="docutils literal notranslate"><span class="pre">.</span></code> to the label and give an index (e.g. <code class="docutils literal notranslate"><span class="pre">C.1</span></code> to get the first C atom in the file). You can also use a range to get multiple atoms at the same time (e.g. <code class="docutils literal notranslate"><span class="pre">C.1-3</span></code> to get the first three C atoms in the file).</p>
<p><strong>Querying properties</strong>:</p>
<p>You can also use the pandas query syntax to filter the output. For example, to get all the C atoms with a chemical shielding larger than 120 ppm:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>soprano<span class="w"> </span>nmr<span class="w"> </span>&lt;magres_file<span class="w"> </span>&gt;<span class="w"> </span>-s<span class="w"> </span>C<span class="w"> </span>--query<span class="w"> </span><span class="s1">&#39;MS_shielding &gt; 120&#39;</span>
</pre></div>
</div>
<p>You can build up quite complex queries in this way. For example, to search through all the .magres files in the current directory and get all the C atoms with a chemical shielding between 100 and 200 ppm and an asymmetry greater than 0.5:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>soprano<span class="w"> </span>nmr<span class="w"> </span>*.magres<span class="w"> </span>-s<span class="w"> </span>C<span class="w"> </span>--query<span class="w"> </span><span class="s2">&quot;100 &lt; MS_shielding &lt; 200 and MS_asymmetry &gt; 0.5&quot;</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>soprano<span class="w"> </span>nmr<span class="w"> </span><span class="err">\</span>
    <span class="o">../</span><span class="n">tests</span><span class="o">/</span><span class="n">test_data</span><span class="o">/*.</span><span class="n">magres</span> \
    <span class="o">-</span><span class="n">s</span> <span class="n">C</span> \
    <span class="o">--</span><span class="n">query</span> <span class="s2">&quot;100 &lt; MS_shielding &lt; 200 and MS_asymmetry &gt; 0.5&quot;</span> \
    <span class="o">--</span><span class="n">include</span> <span class="n">MS_shielding</span><span class="p">,</span><span class="n">MS_asymmetry</span> \
    <span class="o">--</span><span class="n">merge</span> \
    <span class="o">-</span><span class="n">o</span> <span class="o">./</span><span class="n">_temp_output</span><span class="o">/</span><span class="n">query_results</span><span class="o">.</span><span class="n">csv</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;_temp_output/query_results.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">:]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>labels</th>
      <th>species</th>
      <th>multiplicity</th>
      <th>tags</th>
      <th>file</th>
      <th>MS_shielding/ppm</th>
      <th>MS_asymmetry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>C4</td>
      <td>13C</td>
      <td>4.0</td>
      <td>22</td>
      <td>../tests/test_data/EDIZUM.magres</td>
      <td>179.428756</td>
      <td>0.872576</td>
    </tr>
    <tr>
      <th>1</th>
      <td>C7</td>
      <td>13C</td>
      <td>4.0</td>
      <td>25</td>
      <td>../tests/test_data/EDIZUM.magres</td>
      <td>130.068841</td>
      <td>0.515770</td>
    </tr>
    <tr>
      <th>2</th>
      <td>C9</td>
      <td>13C</td>
      <td>4.0</td>
      <td>27</td>
      <td>../tests/test_data/EDIZUM.magres</td>
      <td>184.179198</td>
      <td>0.976923</td>
    </tr>
    <tr>
      <th>3</th>
      <td>C_1</td>
      <td>13C</td>
      <td>1.0</td>
      <td>6</td>
      <td>../tests/test_data/ethanol.magres</td>
      <td>156.467218</td>
      <td>0.704557</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="averaging-over-functional-groups">
<h3>Averaging over functional groups<a class="headerlink" href="#averaging-over-functional-groups" title="Link to this heading">#</a></h3>
<p>In organic systems, we often have functional groups that we want to average over. For example, we might want to average over all the methyl groups in a molecule. The CLI allows to do this using the <code class="docutils literal notranslate"><span class="pre">-g</span></code> option:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>soprano<span class="w"> </span>nmr<span class="w"> </span>&lt;magres_file<span class="w"> </span>&gt;<span class="w"> </span>-g<span class="w"> </span>CH3
</pre></div>
</div>
<p>You can also comma-separate multiple groups:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>soprano<span class="w"> </span>nmr<span class="w"> </span>&lt;magres_file<span class="w"> </span>&gt;<span class="w"> </span>-g<span class="w"> </span>CH3,NH3
</pre></div>
</div>
<p>The output will contain the average NMR data for each group. For example, for ethanol, we get:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>soprano<span class="w"> </span>nmr<span class="w"> </span>./tutorial_data/ethanol.magres<span class="w"> </span><span class="err">\</span>
    <span class="o">-</span><span class="n">g</span> <span class="n">CH3</span> \
    <span class="o">--</span><span class="n">include</span> <span class="n">MS_shielding</span><span class="p">,</span><span class="n">MS_asymmetry</span><span class="p">,</span><span class="n">MS_reduced_anisotropy</span> \
    <span class="o">-</span><span class="n">o</span> <span class="o">./</span><span class="n">_temp_output</span><span class="o">/</span><span class="n">ethanol_CH3</span><span class="o">.</span><span class="n">csv</span>

<span class="c1"># Show the results:</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;_temp_output/ethanol_CH3.csv&#39;</span><span class="p">)</span>
<span class="c1"># drop the column called &#39;file&#39;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># drop unnamed columns</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;^Unnamed&#39;</span><span class="p">)]</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>labels</th>
      <th>species</th>
      <th>multiplicity</th>
      <th>tags</th>
      <th>MS_shielding/ppm</th>
      <th>MS_reduced_anisotropy/ppm</th>
      <th>MS_asymmetry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>H_1,H_2,H_3</td>
      <td>1H</td>
      <td>3.0</td>
      <td>-100000</td>
      <td>29.983808</td>
      <td>-1.046125</td>
      <td>0.541664</td>
    </tr>
    <tr>
      <th>1</th>
      <td>H_4</td>
      <td>1H</td>
      <td>1.0</td>
      <td>3</td>
      <td>26.980027</td>
      <td>5.444059</td>
      <td>0.937102</td>
    </tr>
    <tr>
      <th>2</th>
      <td>H_5</td>
      <td>1H</td>
      <td>1.0</td>
      <td>4</td>
      <td>27.390413</td>
      <td>-4.747813</td>
      <td>0.928356</td>
    </tr>
    <tr>
      <th>3</th>
      <td>H_6</td>
      <td>1H</td>
      <td>1.0</td>
      <td>5</td>
      <td>31.984976</td>
      <td>9.412286</td>
      <td>0.452687</td>
    </tr>
    <tr>
      <th>4</th>
      <td>C_1</td>
      <td>13C</td>
      <td>1.0</td>
      <td>6</td>
      <td>156.467218</td>
      <td>22.531358</td>
      <td>0.704557</td>
    </tr>
    <tr>
      <th>5</th>
      <td>C_2</td>
      <td>13C</td>
      <td>1.0</td>
      <td>7</td>
      <td>109.857140</td>
      <td>46.834011</td>
      <td>0.414376</td>
    </tr>
    <tr>
      <th>6</th>
      <td>O_1</td>
      <td>17O</td>
      <td>1.0</td>
      <td>8</td>
      <td>268.028520</td>
      <td>-34.253562</td>
      <td>0.983015</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="other-options">
<h3>Other options<a class="headerlink" href="#other-options" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Viewing the (filtered) structure (<code class="docutils literal notranslate"><span class="pre">--view</span></code>) using the ASE GUI</p></li>
<li><p>Saving the output to a file (<code class="docutils literal notranslate"><span class="pre">-o</span></code>) (txt, CSV, JSON, YAML, etc.)</p></li>
<li><p>Setting the isotopes (<code class="docutils literal notranslate"><span class="pre">-i</span></code>) (e.g. <code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">13C,2H</span></code>)</p></li>
<li><p>Setting the chemical shift gradients and references (e.g. <code class="docutils literal notranslate"><span class="pre">--gradients</span> <span class="pre">C:-0.99,H:-0.95</span></code> and <code class="docutils literal notranslate"><span class="pre">--references</span> <span class="pre">C:100,H:30</span></code>)</p></li>
<li><p>Merging the results from multiple files (<code class="docutils literal notranslate"><span class="pre">--merge</span></code>)</p></li>
<li><p>Sorting the output by any column (e.g. <code class="docutils literal notranslate"><span class="pre">--sortby</span> <span class="pre">EFG_Vzz</span></code>)</p></li>
<li><p>Setting the Euler angle convention (e.g. <code class="docutils literal notranslate"><span class="pre">--euler</span> <span class="pre">zyz</span></code>)</p></li>
</ul>
<p>To see the full list of options, their description and default values, run <code class="docutils literal notranslate"><span class="pre">soprano</span> <span class="pre">nmr</span> <span class="pre">--help</span></code>.</p>
</section>
</section>
<section id="plotting-simulated-spectra-from-magres-file">
<h2>2. Plotting simulated spectra from .magres file<a class="headerlink" href="#plotting-simulated-spectra-from-magres-file" title="Link to this heading">#</a></h2>
<p>Soprano can also be used to simulate NMR spectra from a .magres file. The <code class="docutils literal notranslate"><span class="pre">plotnmr</span></code> command can be used to do this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>soprano<span class="w"> </span>plotnmr<span class="w"> </span>&lt;magres_file<span class="w"> </span>&gt;<span class="w"> </span>-x<span class="w"> </span>C
</pre></div>
</div>
<p>By default this command will produce a 2D NMR plot of the carbon atoms in the file.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>soprano<span class="w"> </span>plotnmr<span class="w"> </span><span class="err">\</span>
    <span class="o">../</span><span class="n">tests</span><span class="o">/</span><span class="n">test_data</span><span class="o">/</span><span class="n">EDIZUM</span><span class="o">.</span><span class="n">magres</span> \
    <span class="o">-</span><span class="n">x</span> <span class="n">C</span> \
    <span class="o">-</span><span class="n">y</span> <span class="n">H</span> \
    <span class="o">--</span><span class="n">references</span> <span class="n">C</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span><span class="n">H</span><span class="p">:</span><span class="mi">30</span> \
    <span class="o">--</span><span class="n">scale</span><span class="o">-</span><span class="n">marker</span><span class="o">-</span><span class="n">by</span> <span class="n">dipolar</span> \
    <span class="o">--</span><span class="n">rcut</span> <span class="mf">2.5</span> \
    <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">legend</span> \
    <span class="o">-</span><span class="n">o</span> <span class="o">./</span><span class="n">_temp_output</span><span class="o">/</span><span class="n">plot_results</span><span class="o">.</span><span class="n">png</span>
<span class="n">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;_temp_output/plot_results.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/851f6e3a590d8cad7fbfde71cf77006548714d6b1f19ee904aa9b27d2065c66e.png" src="../_images/851f6e3a590d8cad7fbfde71cf77006548714d6b1f19ee904aa9b27d2065c66e.png" />
</div>
</div>
</section>
<section id="dipolar-coupling-calculations">
<h2>Dipolar coupling calculations<a class="headerlink" href="#dipolar-coupling-calculations" title="Link to this heading">#</a></h2>
<p>We can use the dipolar subcommand to extract dipolar couplings from any structure file (i.e. it need not be a .magres file).</p>
<p>Some example commands are:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>soprano<span class="w"> </span>dipolar<span class="w"> </span>&lt;structure<span class="w"> </span>file&gt;
</pre></div>
</div>
<p>which calculates the dipolar couplings between all pairs of atoms in the structure.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>soprano<span class="w"> </span>dipolar<span class="w"> </span>&lt;structure<span class="w"> </span>file&gt;<span class="w"> </span>-i<span class="w"> </span>C<span class="w"> </span>-j<span class="w"> </span>C
</pre></div>
</div>
<p>which calculates the dipolar couplings between all pairs of carbon atoms in the structure.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>soprano<span class="w"> </span>dipolar<span class="w"> </span>&lt;structure<span class="w"> </span>file&gt;<span class="w"> </span>-i<span class="w"> </span>C1<span class="w"> </span>-j<span class="w"> </span>H1
</pre></div>
</div>
<p>which calculates the dipolar couplings between pairs of sites labelled C1 and H1.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>soprano<span class="w"> </span>dipolar<span class="w"> </span>&lt;structure<span class="w"> </span>file&gt;<span class="w"> </span>--rss<span class="w"> </span>--cutoff<span class="w"> </span><span class="m">5</span>.0
</pre></div>
</div>
<p>which calculates the Root Sum Square dipolar constant for each atom in the system up to 5.0 Å away (including periodicity).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># find all C-H couplings with |D| &gt; 10 Hz</span>
<span class="o">!</span>soprano<span class="w"> </span>dipolar<span class="w"> </span>./tutorial_data/ethanol.magres<span class="w"> </span><span class="err">\</span>
    <span class="o">-</span><span class="n">i</span> <span class="n">C</span> <span class="o">-</span><span class="n">j</span> <span class="n">H</span> \
    <span class="o">--</span><span class="n">query</span> <span class="s2">&quot;abs(D) &gt; 10&quot;</span> \
    <span class="o">-</span><span class="n">o</span> <span class="o">./</span><span class="n">_temp_output</span><span class="o">/</span><span class="n">ethanol_dipolar</span><span class="o">.</span><span class="n">csv</span>

<span class="c1"># Show the results:</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;_temp_output/ethanol_dipolar.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">:]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing output to ./_temp_output/ethanol_dipolar.csv
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pair</th>
      <th>label_i</th>
      <th>label_j</th>
      <th>isotope_i</th>
      <th>isotope_j</th>
      <th>D/kHz</th>
      <th>alpha/deg</th>
      <th>beta/deg</th>
      <th>file</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>(0, 6)</td>
      <td>H</td>
      <td>C</td>
      <td>1H</td>
      <td>13C</td>
      <td>-23.050578</td>
      <td>-168.752350</td>
      <td>126.182020</td>
      <td>./tutorial_data/ethanol.magres</td>
    </tr>
    <tr>
      <th>1</th>
      <td>(1, 6)</td>
      <td>H</td>
      <td>C</td>
      <td>1H</td>
      <td>13C</td>
      <td>-23.004866</td>
      <td>-78.545627</td>
      <td>59.023572</td>
      <td>./tutorial_data/ethanol.magres</td>
    </tr>
    <tr>
      <th>2</th>
      <td>(2, 6)</td>
      <td>H</td>
      <td>C</td>
      <td>1H</td>
      <td>13C</td>
      <td>-23.188447</td>
      <td>13.017396</td>
      <td>124.957193</td>
      <td>./tutorial_data/ethanol.magres</td>
    </tr>
    <tr>
      <th>3</th>
      <td>(3, 7)</td>
      <td>H</td>
      <td>C</td>
      <td>1H</td>
      <td>13C</td>
      <td>-22.733525</td>
      <td>-167.901289</td>
      <td>55.204961</td>
      <td>./tutorial_data/ethanol.magres</td>
    </tr>
    <tr>
      <th>4</th>
      <td>(4, 7)</td>
      <td>H</td>
      <td>C</td>
      <td>1H</td>
      <td>13C</td>
      <td>-23.179595</td>
      <td>101.784109</td>
      <td>121.180234</td>
      <td>./tutorial_data/ethanol.magres</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>soprano<span class="w"> </span>dipolar<span class="w"> </span>./tutorial_data/ethanol.magres<span class="w"> </span>--rss<span class="w"> </span>--cutoff<span class="w"> </span><span class="m">10</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Extracted data from: ./tutorial_data/ethanol.magres
   index label isotope  D_RSS/kHz
0      0     H      1H      40221
1      1     H      1H      40496
2      2     H      1H      40030
3      3     H      1H      35389
4      4     H      1H      35029
5      5     H      1H      24082
6      6     C     13C      40313
7      7     C     13C      33251
8      8     O     17O      18061
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./tutorials"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="06-defect_calculations.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Tutorial 6 - Soprano for defect calculations</p>
      </div>
    </a>
    <a class="right-next"
       href="../submitter.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Job Submitter</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#extracting-nmr-data-from-a-magres-file">1. Extracting NMR data from a .magres file</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#filtering-and-selecting-atoms">Filtering and selecting atoms</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#averaging-over-functional-groups">Averaging over functional groups</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#other-options">Other options</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting-simulated-spectra-from-magres-file">2. Plotting simulated spectra from .magres file</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dipolar-coupling-calculations">Dipolar coupling calculations</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By CCP-NC
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>